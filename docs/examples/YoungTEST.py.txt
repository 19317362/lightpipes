#! python3
import LightPipes
import time
import sys
import matplotlib.pyplot as plt
print('Execute with python version:')
print(sys.version);print('\n')


start_time = time.time()

m=1
nm=1e-9*m
um=1e-6*m
mm=1e-3*m
cm=1e-2*m

try:
    LP=LightPipes.Init()
    print('LightPipes version:')
    LP.version()
    print('\n')
    wavelength=20*um
    size=30.0*mm
    N=1500
    F=LP.Begin(size,wavelength,N)
    F1=LP.CircAperture(0.15*mm, -0.6*mm,0, F)
    F2=LP.CircAperture(0.15*mm, 0.6*mm,0, F)    
    F=LP.BeamMix(F1,F2)
    #F=LP.Fresnel2(10*cm,F)
    F=LP.Fresnel(10*cm,F)    
    I=LP.Intensity(2,F)
    print("Execution time: --- %4.2f seconds ---" % (time.time() - start_time))   
    plt.imshow(I);
    plt.show()
finally:
    del LightPipes
